<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roving Tabindex</title>

    <style>:root{--custom-1:#486902;--custom-2:#A9BF04;--custom-3:#CCD96C;--custom-4:#A6A049;--custom-5:#D9CBA0;--custom-submit:#823F09;--custom-submit-dark:#301703;--custom-focus:var(--custom-1);--white:#FFF;--border-radius:0;background:var(--custom-2)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}*{box-sizing:border-box;font-family:inherit;line-height:inherit;margin:0;padding:0}* + *,.list-with-margin > * + li{margin-top:1em}.sr-only + *,legend + *,li{margin-top:0}dl,ol,ul{padding-left:2.5rem}body{background:#fff;border-radius:var(--border-radius);font-family:Arial, sans-serif;line-height:1.5;margin:2vw;padding:2vw;--color-error:red;--color-success:green}h1{font-size:2rem;line-height:1.2;text-align:center}h2{align-items:center;display:flex;padding-top:1rem}em{color:var(--custom-1);font-weight:bold}fieldset{border:none;display:flex;flex-direction:column;padding:0.5rem 0}figcaption{border-top:1px solid;display:inline-block;font-size:0.875em;margin-top:2rem;padding:0.75rem 0.5rem 0}figure{background:rgba(0,0,0,0.1);border:2px solid;padding:1rem}legend{margin-left:1rem}label{display:flex;flex-direction:column;font-weight:bold}output{display:block;margin-left:auto;margin-right:auto;max-width:32rem}input,pre,svg,textarea{border:0.125rem solid;border-color:var(--custom-5);border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;height:auto;line-height:inherit;max-width:100%}input{margin-top:0.5rem;padding:0.5rem;max-width:20rem}input:focus,textarea:focus{border-color:var(--custom-focus);box-shadow:0 0 6px 3px var(--custom-4);outline:none}textarea{padding:1em;min-height:20em}pre{background:rgba(0,0,0,0.1);border-color:var(--custom-1);display:block;font-family:monospace;overflow-x:auto;padding:1em}code{font-family:monospace}a{color:inherit;padding-bottom:2px;position:relative;text-decoration-color:var(--custom-1, currentColor)}a::before{background-color:var(--custom-1, currentColor);bottom:3px;content:"";left:0;height:2px;position:absolute;transition:0.2s width;width:0}a:focus::before,a:hover::before{text-decoration-color:transparent;width:100%}nav{border-bottom:3px solid;border-color:var(--custom-1);margin-left:-2vw;margin-right:-2vw;padding:1rem}nav ul{display:flex;justify-content:space-evenly;list-style-type:none;padding-left:0;white-space:nowrap}nav a{display:inline-block;margin-top:0;padding:0.5rem 0.75rem 0;text-decoration-color:transparent}nav a::first-letter{font-size:1.25em;font-weight:bold}nav a::before{left:0.75rem}nav a:focus::before,nav a:hover::before{width:calc(100% - 1.5rem)}[role="button"],[type="submit"],button{background:var(--custom-1);border:none;border-radius:var(--border-radius);color:var(--white);font-size:inherit;font-weight:bold;margin-bottom:1em;padding:0.75rem 1.25rem;text-transform:uppercase}[role="button"]:focus,[type="submit"]:focus,button:focus{background:var(--custom-4);box-shadow:0 0 6px 3px var(--custom-4);outline:none}[type="submit"],form button:not([type]){background:var(--custom-submit)}[type="submit"]:focus,form button:not([type]):focus{background:var(--custom-submit-dark)}input[type=range]{-webkit-appearance:none;width:100%;margin:1rem 0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:1rem;cursor:pointer;border-radius:0;border:0.125rem solid}input[type=range]::-webkit-slider-thumb{border:0.125rem solid;border-radius:var(--border-radius);height:3rem;width:1.5rem;cursor:pointer;-webkit-appearance:none;margin-top:-1rem}input[type=range]::-moz-range-track{width:100%;height:1rem;cursor:pointer;border-radius:0;border:none}input[type=range]::-moz-range-thumb{background:var(--custom-2);border:0.125rem solid;height:3rem;width:1.5rem;border-radius:var(--border-radius);cursor:pointer}input[type=range]::-ms-track{width:100%;height:1rem;cursor:pointer}input[type=range]::-ms-fill-lower{border:0.125rem solid;border-radius:0}input[type=range]::-ms-fill-upper{border:0.125rem solid;border-radius:0}input[type=range]::-ms-thumb{border:0.125rem solid;border-radius:var(--border-radius);width:1.5rem;cursor:pointer;height:1rem}:root{--custom-1:#6E5D45;--custom-2:#F79E52;--custom-3:#E08155;--custom-4:#BA423D;--custom-5:#ED524E}body{margin:2vw auto;max-width:60rem}em{color:var(--custom-4)}fieldset{padding:0}figure{border-color:var(--custom-4)}label{display:flex;flex-direction:column}label small{margin-top:0.25rem;order:1}label input{margin-top:0.5rem}li,p{max-width:65ch}pre{padding:0}code.hljs,pre code{padding:1rem}[role="radio"]{align-items:center;display:inline-flex;position:relative}[role="radio"]:focus{outline:2px dotted var(--custom-5);outline-offset:2px}[role="radio"]::before{content:"";border:1px solid rgba(0,0,0,0.75);border-radius:50%;display:inline-block;height:1rem;margin-right:0.5rem;width:1rem}[role="radio"][aria-checked="true"]::after{background:rgba(0,0,0,0.75);border-radius:50%;bottom:auto;content:"";display:inline-block;height:calc(1rem - 4px);left:3px;position:absolute;top:auto;width:calc(1rem - 4px)}[role="toolbar"]{align-items:center;background:rgba(0,0,0,0.2);border:2px solid var(--custom-3);display:inline-flex;padding:0.5rem}[role="toolbar"] button{margin-bottom:0}[role="toolbar"] * + *{margin-left:1rem;margin-top:0}[role="toolbar"] .wrapper{border:2px solid var(--custom-2);display:inline-flex}[role="toolbar"] .wrapper > * + *{margin-left:0.25rem}.hljs{display:block;overflow-x:auto;padding:0.5em;background:#232323;color:#e6e1dc}.hljs-comment,.hljs-quote{color:#bc9458;font-style:italic}.hljs-keyword,.hljs-selector-tag{color:#db682c}.hljs-number,.hljs-regexp,.hljs-string,.hljs-template-variable,.hljs-variable{color:#a5c261}.hljs-subst{color:#519f50}.hljs-name,.hljs-tag{color:#e8bf6a}.hljs-type{color:#da4939}.hljs-attr,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-link,.hljs-symbol{color:#6d9cbe}.hljs-params{color:#d0d0ff}.hljs-attribute{color:#cda869}.hljs-meta{color:#9b859d}.hljs-section,.hljs-title{color:#ffc66d}.hljs-addition{background-color:#144212;color:#e6e1dc;display:inline-block;width:100%}.hljs-deletion{background-color:#600;color:#e6e1dc;display:inline-block;width:100%}.hljs-selector-class{color:#9b703f}.hljs-selector-id{color:#8b98ab}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}.hljs-link{text-decoration:underline}#usage + ol > * + li{margin-top:1rem}</style>
</head>
<body>
<nav>
    <ul>
        <li><a href="#demos">Demos</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#settings">Settings</a></li>
        <li><a href="#get-it-now">Get it now</a></li>
    </ul>
</nav>
<h1>Roving Tabindex - javascript helper to create accessible widgets</h1>
<h2 id="demos">Demos</h2>
<h3>Radio Group</h3>
<p>Implemented using <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#radiobutton">WAI Guidelines</a>.</p>
<figure>
    <p><strong>Preview</strong></p>
    <div role="radiogroup" aria-labelledby="label_1">
        <strong id="label_1">My favourite color:</strong>
        <div id="radio-group-widget">
            <div role="radio" aria-checked="false" tabindex="0">Red</div>
            <div role="radio" aria-checked="false" tabindex="-1">Green</div>
            <div role="radio" aria-checked="false" tabindex="-1">Blue</div>
        </div>
    </div>
    <p><strong>HTML</strong></p>
    <div>
        <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"radiogroup"</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">"label_1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"label_1"</span>&gt;</span>My favourite color:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"radio-group-widget"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>Red<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>Green<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>Blue<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
    </div>
    <p><strong>Javascript</strong></p>
    <div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> radiogroup = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'radio-group-widget'</span>);

<span class="hljs-keyword">new</span> RovingTabindex(radiogroup);

radiogroup.addEventListener(<span class="hljs-string">'movefocus'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    event.detail.to.click()
});

radiogroup.addEventListener(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.target.matches(<span class="hljs-string">'[role="radio"]'</span>) &amp;&amp; event.key === <span class="hljs-string">" "</span>) {
        event.preventDefault(); <span class="hljs-comment">//do not scroll down</span>
        event.target.click();
    }
});

radiogroup.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
   <span class="hljs-keyword">if</span> (event.target.matches(<span class="hljs-string">'[role="radio"][tabindex="-1"]'</span>)) {
       <span class="hljs-keyword">let</span> <span class="hljs-keyword">from</span> = radiogroup.querySelector(<span class="hljs-string">'[tabindex="0"]'</span>);
       <span class="hljs-keyword">let</span> to = event.target;

       <span class="hljs-comment">//uncheck previously checked item</span>
       <span class="hljs-keyword">from</span>.setAttribute(<span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'-1'</span>);
       <span class="hljs-keyword">from</span>.setAttribute(<span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'false'</span>);

       <span class="hljs-comment">//check new item</span>
       to.setAttribute(<span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'0'</span>);
       to.setAttribute(<span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'true'</span>);
       to.focus();
   }
});</code></pre>
    </div>
    <figcaption>Radio group widget implementation in HTML and javascript.</figcaption>
</figure>
<h3>Toolbar</h3>
<p>Implemented using <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#toolbar">WAI Guidelines</a>.</p>
<figure>
    <p><strong>Preview</strong></p>
    <div id="toolbar-widget" role="toolbar" aria-label="Demo toolbar" aria-controls="square">
        <div class="wrapper">
            <button tabindex="0">1</button>
            <button tabindex="-1">2</button>
            <button tabindex="-1">3</button>
        </div>
        <button tabindex="-1">4</button>
        <button tabindex="-1">5</button>
    </div>
    <div id="square"></div>
    <p><strong>HTML</strong></p>
    <div>
        <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"toolbar-widget"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"toolbar"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Demo toolbar"</span> <span class="hljs-attr">aria-controls</span>=<span class="hljs-string">"square"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"square"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
    </div>
    <p><strong>Javascript</strong></p>
    <div><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> toolbar = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'toolbar-widget'</span>);

<span class="hljs-keyword">new</span> RovingTabindex(toolbar, {
    <span class="hljs-attr">next</span>: [<span class="hljs-string">'ArrowRight'</span>],
    <span class="hljs-attr">previous</span>: [<span class="hljs-string">'ArrowLeft'</span>],
    <span class="hljs-attr">childrenSelector</span>: <span class="hljs-string">'button'</span>
});

<span class="hljs-keyword">const</span> manageFocus = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">from</span>,to</span>) =&gt;</span> {
    <span class="hljs-keyword">from</span>.setAttribute(<span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'-1'</span>);
    to.setAttribute(<span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'0'</span>);
    to.focus();
};

toolbar.addEventListener(<span class="hljs-string">'movefocus'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    manageFocus(event.detail.from, event.detail.to)
});

toolbar.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.target.matches(<span class="hljs-string">'[tabindex="-1"]'</span>)) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">from</span> = toolbar.querySelector(<span class="hljs-string">'[tabindex="0"]'</span>);
        <span class="hljs-keyword">let</span> to = event.target;

        manageFocus(<span class="hljs-keyword">from</span>, to);
    }
});</code></pre>
    </div>
    <figcaption>Toolbar widget implementation in HTML and javascript.</figcaption>
</figure>
<h2 id="usage">Getting started</h2>
<ol>
<li>
    <h3>Setup your HTML: a parent and children with appropriate tabindex.</h3>
    <figure>
        <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>Button 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>Button 2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span>&gt;</span>Button 3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
    </figure>
</li>
<li>
    <h3>Add rovingtabindex.js before your closing body tag.</h3>
    <figure>
        <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"rovingtabindex.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
    </figure>
</li>
<li>
    <h3>Initialize RovingTabindex.</h3>
    <figure>
        <pre><code class="hljs javascript"><span class="hljs-keyword">new</span> RovingTabindex(<span class="hljs-string">'#demo'</span>);</code></pre>
    </figure>
</li>
</ol>
<h2 id="settings">Settings</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>first</strong></p>
        <p><b>Type:</b> array</p>
        <p><b>Default:</b> <code>["Home"]</code></p>
        <p>Array with all values of <code>event.key</code>, that set focus to the first element.</p>
    </li>
    <li>
        <p><strong>last</strong></p>
        <p><b>Type:</b> array</p>
        <p><b>Default:</b> <code>["End"]</code></p>
        <p>Array with all values of <code>event.key</code>, that set focus to the last element.</p>
    </li>
    <li>
        <p><strong>next</strong></p>
        <p><b>Type:</b> array</p>
        <p><b>Default:</b> <code> ["ArrowRight", "ArrowDown"]</code></p>
        <p>Array with all values of <code>event.key</code>, that set focus to the next element. If <code>wrap</code> is set to <code>true</code>, then last element's next element is the first element.</code></p>
    </li>
    <li>
        <p><strong>previous</strong></p>
        <p><b>Type:</b> array</p>
        <p><b>Default:</b> <code>["ArrowLeft", "ArrowUp"]</code></p>
        <p>Array with all values of <code>event.key</code>, that set focus to the previous element. If <code>wrap</code> is set to <code>true</code>, then first element's previous element is the last element.</code></p>
    </li>
    <li>
        <p><strong>character</strong></p>
        <p><b>Type:</b> boolean</p>
        <p><b>Default:</b> <code>true</code></p>
        <p>Indicates if typing a character should move focus to the first item beginning with that character. If no item matches typed character, focus does not move.</p>
    </li>
    <li>
        <p><strong>wrap</strong></p>
        <p><b>Type:</b> boolean</p>
        <p><b>Default:</b> <code>true</code></p>
        <p>If set to true indicates, first item's previous item is last item and last item's next item is first item.</p>
    </li>
    <li>
        <p><strong>childrenSelector</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>':scope > *'</code></p>
        <p>Informs the widget which elements it should iterate over. Allows to ignore wrapping elements, icons and so on.</p>
    </li>
    <li>
        <p><strong>findActive</strong></p>
        <p><b>Type:</b> function</p>
        <p><b>Default:</b> <code>(item) => item.getAttribute('tabindex') === '0'</code></p>
        <p>Function used to identify active child on first interaction.</p>
    </li>
</ul>
<h2>Methods</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>destroy</strong></p>
        <p>Removes all event listeners.</p>
    </li>
</ul>
<h2>Events</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>rovingtabindexinitialized</strong></p>
        <p>Fired when widget gets initialized.</p>
    </li>
    <li>
        <p><strong>rovingtabindexdestroyed</strong></p>
        <p>Fired after completing destroy action.</p>
    </li>
    <li>
        <p><strong>movefocus</strong></p>
        <p>Fired after pressing key should move focus. <code>event.details</code> contains two fields (<code>from</code and <code>to</code>) indicating previously focused item and item, that should get focused.</p>
    </li>
</ul>
<h3>Get it now</h3>
<p>
    You will fing all the code on <a href="https://github.com/kasia-website/rovingtabindex">Github</a>.
</p>
<script>class RovingTabindex{constructor(element,settings){this.element=element;this.defaults={first:["Home"],last:["End"],next:["ArrowRight","ArrowDown"],previous:["ArrowLeft","ArrowUp"],character:true,wrap:true,childrenSelector:':scope > *',findActive:(item)=>item.getAttribute('tabindex')==='0'};this.options={...this.defaults,...settings};this.element.addEventListener('keydown',this.handleKeyDown.bind(this));this.element.dispatchEvent(new CustomEvent('rovingtabindexinitialized',{details:{bubbles:true}}))}destroy(){this.element.removeEventListener('keydown',this.handleKeyDown.bind(this));this.element.dispatchEvent(new CustomEvent('rovingtabindexdestroyed',{details:{bubbles:true}}))}handleKeyDown(event){if(this.focusableDirectChildren().length===0){return}let current=this.getActiveChild();let next=current;if(this.options.first.length>0&&this.options.first.indexOf(event.key)>-1){event.preventDefault();next=this.firstFocusableChild()}else if(this.options.last.length>0&&this.options.last.indexOf(event.key)>-1){event.preventDefault();next=this.lastFocusableChild()}else if(this.options.previous.length>0&&this.options.previous.indexOf(event.key)>-1){event.preventDefault();next=this.getPreviousFocusableChild(current)}else if(this.options.next.length>0&&this.options.next.indexOf(event.key)>-1){event.preventDefault();next=this.getNextFocusableChild(current)}else if(this.options.character){next=this.focusableDirectChildren().find(function(item){return item.textContent.toLowerCase().charAt(0)===event.key})}if(next&&next!==current){this.element.dispatchEvent(new CustomEvent('movefocus',{detail:{bubbles:true,from:current,to:next}}))}}firstFocusableChild(){if(this.focusableDirectChildren().length>0){return this.focusableDirectChildren()[0]}}getNextFocusableChild(item){let index=this.focusableDirectChildren().indexOf(item);if(index<0){return this.getActiveChild()}if(index===this.focusableDirectChildren().length-1){if(this.options.wrap){return this.firstFocusableChild()}else{return item}}return this.focusableDirectChildren()[index+1]}getPreviousFocusableChild(item){let index=this.focusableDirectChildren().indexOf(item);if(index<0){return this.getActiveChild()}if(index===0){if(this.options.wrap){return this.lastFocusableChild()}else{return item}}return this.focusableDirectChildren()[index-1]}lastFocusableChild(){if(this.focusableDirectChildren().length>0){return this.focusableDirectChildren()[this.focusableDirectChildren().length-1]}}focusableDirectChildren(){return Array.from(this.element.querySelectorAll(this.options.childrenSelector))}getActiveChild(){let item=this.focusableDirectChildren().find(this.options.findActive);if(!item){return this.firstFocusableChild}return item}}const radiogroup=document.getElementById('radio-group-widget');new RovingTabindex(radiogroup);radiogroup.addEventListener('movefocus',(event)=>{event.detail.to.click()});radiogroup.addEventListener('keydown',(event)=>{if(event.target.matches('[role="radio"]')&&event.key===" "){event.preventDefault();event.target.click()}});radiogroup.addEventListener('click',(event)=>{if(event.target.matches('[role="radio"][tabindex="-1"]')){let from=radiogroup.querySelector('[tabindex="0"]');let to=event.target;from.setAttribute('tabindex','-1');from.setAttribute('aria-checked','false');to.setAttribute('tabindex','0');to.setAttribute('aria-checked','true');to.focus()}});const toolbar=document.getElementById('toolbar-widget');new RovingTabindex(toolbar,{next:['ArrowRight'],previous:['ArrowLeft'],childrenSelector:'button'});const manageFocus=(from,to)=>{from.setAttribute('tabindex','-1');to.setAttribute('tabindex','0');to.focus()};toolbar.addEventListener('movefocus',(event)=>{manageFocus(event.detail.from,event.detail.to)});toolbar.addEventListener('click',(event)=>{if(event.target.matches('[tabindex="-1"]')){let from=toolbar.querySelector('[tabindex="0"]');let to=event.target;manageFocus(from,to)}});</script>
</body>
</html>
